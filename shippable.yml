language: node_js

before_script:
  - rm -rf node_modules
  - mkdir -p ~/.nvm/versions
  - source ~/.nvm/nvm.sh && nvm install 4.1 && npm install

script:
  - source ~/.nvm/nvm.sh && nvm use 4.1 && npm run build
  - source ~/.nvm/nvm.sh && nvm use 4.1 && npm run review
  - source ~/.nvm/nvm.sh && nvm use 4.1 && npm run test
  - source ~/.nvm/nvm.sh && nvm use 4.1 && npm run export

after_script:
  - rm app/public/.gitignore
  - git add . && git commit -a -m 'added public'
  - git push -f git@heroku.com:opentrials-tracker.git master

notifications:
  email:
    - roll@respect31.com
